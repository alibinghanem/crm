# ๐ ุฏููู ุงูุชุญุฏูุซ ุงูุชููุงุฆู ูููููุน

## ุงูุทุฑู ุงููุชุงุญุฉ:

1. **GitHub Actions** - ุงูุฃูุถู ูููุณุชูุฏุนุงุช ุนูู GitHub
2. **Webhook ูุญูู** - ููุชุญุฏูุซ ุนูุฏ Push ุนูู Git
3. **ุฌุฏููุฉ ุชููุงุฆูุฉ** - ุงูุชุญูู ูู ุงูุชุญุฏูุซุงุช ูู ูุชุฑุฉ
4. **ูุฏูู ุณุฑูุน** - ุชุดุบูู ุณูุฑูุจุช ุจุถุบุทุฉ ูุงุญุฏุฉ

---

## ุงูุทุฑููุฉ 1๏ธโฃ: GitHub Actions (ุงูุฃูุซุฑ ุงุญุชุฑุงููุฉ) ๐

### ุงููููุฒุงุช:
โ ุชุญุฏูุซ ุชููุงุฆู ููุฑ Push ุนูู GitHub
โ ูุง ูุญุชุงุฌ ุฅุนุฏุงุฏุงุช ุนูู ุงูุณูุฑูุฑ
โ ุขูู ููุถููู

### ุงูุฅุนุฏุงุฏ:

#### 1. ุนูู ุงูุณูุฑูุฑ:
```powershell
# ุชุซุจูุช OpenSSH Server (ุฅุฐุง ูู ููู ูุซุจุชุงู)
Add-WindowsCapability -Online -Name OpenSSH.Server~~~~0.0.1.0
Start-Service sshd
Set-Service -Name sshd -StartupType 'Automatic'

# ูุชุญ ูููุฐ SSH ูู Firewall
New-NetFirewallRule -Name sshd -DisplayName 'OpenSSH Server (sshd)' -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 22
```

#### 2. ุนูู GitHub:
- ุงุฐูุจ ุฅูู: `Settings` > `Secrets and variables` > `Actions`
- ุฃุถู ุงููุชุบูุฑุงุช:
  - `SERVER_HOST`: IP ุงูุณูุฑูุฑ
  - `SERVER_USERNAME`: ุงุณู ุงููุณุชุฎุฏู
  - `SERVER_PASSWORD`: ูููุฉ ุงููุฑูุฑ

#### 3. ุงูุชูู!
ุงูุขู ุนูุฏ ูู Push ุนูู `main`ุ ุณูุชู ุงูุชุญุฏูุซ ุชููุงุฆูุงู ๐

---

## ุงูุทุฑููุฉ 2๏ธโฃ: Webhook ูุญูู โก

### ุงููููุฒุงุช:
โ ูุนูู ูุญููุงู ุนูู ุงูุณูุฑูุฑ
โ ุณุฑูุน ุฌุฏุงู
โ ูููู ุฑุจุทู ูุน GitHub/GitLab/Bitbucket

### ุงูุฅุนุฏุงุฏ:

#### 1. ุจุฏุก ุฎุงุฏู Webhook:
```powershell
cd C:\inetpub\crm

# ุจุฏุก Webhook ูุน ุงูุชุทุจูู
pm2 start ecosystem.webhook.config.js
pm2 save
```

#### 2. ูุชุญ ุงููููุฐ 9000:
```powershell
New-NetFirewallRule -DisplayName "Webhook Server - Port 9000" -Direction Inbound -Protocol TCP -LocalPort 9000 -Action Allow
```

#### 3. ุนูู GitHub (Settings > Webhooks > Add webhook):
- **Payload URL**: `http://YOUR-SERVER-IP:9000/webhook`
- **Content type**: `application/json`
- **Secret**: (ุงุฎุชูุงุฑู - ููุณ ุงููููุฉ ูู `ecosystem.webhook.config.js`)
- **Events**: `Just the push event`

#### 4. ุงูุชูู!
ุงูุขู ุนูุฏ ูู Pushุ ุณูุชู ุงูุชุญุฏูุซ ุชููุงุฆูุงู ๐

### ุฃูุงูุฑ ูููุฏุฉ:
```powershell
pm2 logs crm-webhook    # ูุดุงูุฏุฉ ุณุฌู Webhook
pm2 restart crm-webhook # ุฅุนุงุฏุฉ ุชุดุบูู Webhook
pm2 stop crm-webhook    # ุฅููุงู Webhook
```

---

## ุงูุทุฑููุฉ 3๏ธโฃ: ุฌุฏููุฉ ุชููุงุฆูุฉ (Task Scheduler) ๐

### ุงููููุฒุงุช:
โ ุจุณูุท ุฌุฏุงู
โ ูุง ูุญุชุงุฌ ุฅุนุฏุงุฏุงุช ูุนูุฏุฉ
โ ูุนูู ูู ุงูุฎูููุฉ

### ุงูุฅุนุฏุงุฏ:

#### 1. ุฅูุดุงุก ุณูุฑูุจุช ุงูุฌุฏููุฉ:
```powershell
# scripts/scheduled-update.ps1 (ููุฌูุฏ ุจุงููุนู ุฃุฏูุงู)
```

#### 2. ุฌุฏููุฉ ุงููููุฉ:
```powershell
# ุงูุชุญ Task Scheduler
# Actions > Create Basic Task

# Name: CRM Auto Update
# Trigger: Daily (ุฃู ูู ุณุงุนุฉ ุญุณุจ ุงูุญุงุฌุฉ)
# Action: Start a program
#   Program: powershell.exe
#   Arguments: -File "C:\inetpub\crm\scripts\scheduled-update.ps1"
```

---

## ุงูุทุฑููุฉ 4๏ธโฃ: ูุฏูู ุณุฑูุน (ุจุถุบุทุฉ ูุงุญุฏุฉ) ๐ฑ๏ธ

### ุฅูุดุงุก ุงุฎุชุตุงุฑ ุนูู ุณุทุญ ุงูููุชุจ:

#### 1. ุฅูุดุงุก ููู `.bat`:
```batch
@echo off
cd C:\inetpub\crm
powershell -ExecutionPolicy Bypass -File ".\scripts\update.ps1" -WithGit -NoDowntime
pause
```

#### 2. ุญูุธู ูู: `ุชุญุฏูุซ_CRM.bat`

#### 3. ุงุณุชุฎุฏุงู:
- ุงููุฑ ูุฑุชูู ุนูู ุงูููู = ุชุญุฏูุซ ููุฑู! ๐จ

---

## ุงูููุงุฑูุฉ ุจูู ุงูุทุฑู:

| ุงูุทุฑููุฉ | ุชููุงุฆู 100% | ุณูููุฉ | ุฃูุงู | ุณุฑุนุฉ |
|---------|-------------|-------|------|------|
| GitHub Actions | โ | โญโญโญ | โญโญโญโญโญ | โญโญโญ |
| Webhook | โ | โญโญโญโญ | โญโญโญโญ | โญโญโญโญโญ |
| ุฌุฏููุฉ | โ | โญโญโญโญโญ | โญโญโญโญโญ | โญโญโญ |
| ูุฏูู | โ | โญโญโญโญโญ | โญโญโญโญโญ | โญโญโญโญโญ |

---

## ๐ ูุตุงุฆุญ ุงูุฃูุงู:

1. **ุงุณุชุฎุฏู HTTPS** ููู Webhooks
2. **ุบููุฑ WEBHOOK_SECRET** ูู ุงูุฅุนุฏุงุฏุงุช
3. **ูููุฏ ุงููุตูู** ูููููุฐ 9000 (IP ูุญุฏุฏ ููุท)
4. **ุงุณุชุฎุฏู SSH Keys** ุจุฏูุงู ูู ูููุฉ ุงููุฑูุฑ

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก:

### Webhook ูุง ูุนููุ
```powershell
# ุชุญูู ูู ุงูุญุงูุฉ
pm2 logs crm-webhook

# ุฃุนุฏ ุงูุชุดุบูู
pm2 restart crm-webhook

# ุชุญูู ูู ุงููููุฐ
netstat -ano | findstr :9000
```

### GitHub Actions ูุดูุ
- ุชุญูู ูู Secrets ูู GitHub
- ุชุฃูุฏ ูู SSH ููุนูู ุนูู ุงูุณูุฑูุฑ
- ุฑุงุฌุน ุณุฌู ุงูุฃุฎุทุงุก ูู GitHub Actions tab

---

## ๐ฏ ุงูุชูุตูุฉ:

**ููุจุฏุงูุฉ**: ุงุณุชุฎุฏู **ุงูุทุฑููุฉ 4 (ูุฏูู)** - ุงูุฃุณูู

**ููุงุญุชุฑุงู**: ุงุณุชุฎุฏู **ุงูุทุฑููุฉ 2 (Webhook)** - ุงูุฃุณุฑุน ูุงูุฃูุซุฑ ูุฑููุฉ

**ูููุดุงุฑูุน ุงููุจูุฑุฉ**: ุงุณุชุฎุฏู **ุงูุทุฑููุฉ 1 (GitHub Actions)** - ุงูุฃูุซุฑ ุฃูุงูุงู

---

**ุชู! ๐** ุงุฎุชุฑ ุงูุทุฑููุฉ ุงูููุงุณุจุฉ ูู ูุทุจูููุง!

